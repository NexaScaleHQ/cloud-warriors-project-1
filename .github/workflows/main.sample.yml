# name: Terraform Workflow

# on:

#   push:

#     branches:

#       - main

#   pull_request:

#     branches:

#       - main

# permissions: read-all

# env:

#   FORCE_COLOR: 3

#   AWS_REGION: eu-west-1

#   TF_KEY: terraform-state.tfstate

# jobs:

#   terraform:

#     name: 'Terraform'

#     runs-on: ubuntu-latest

#     steps:

#       - name: Checkout

#         uses: actions/checkout@v2

#       - name: Setup Terraform

#         uses: hashicorp/setup-terraform@v1

#       - name: Configure AWS Credentials

#         uses: aws-actions/configure-aws-credentials@v1

#         with:

#           aws-access-key-id: "AKIAWBPQPR5DOM6HKGUP"

#           aws-secret-access-key: "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"

#           aws-region: "eu-west-1"

#       - name: Terraform Init

#         run: terraform init -input=false

#       - name: Terraform Plan

#         run: terraform plan -input=false

#       - name: Terraform Apply

#         if: github.event_name == 'push' && github.ref == 'refs/heads/main'

#         run: terraform apply -auto-approve

#       # - name: Terraform Destroy

#       #   if: github.event_name == 'pull_request' && github.event.action == 'closed'

#       #   run: terraform destroy -auto-approve
        
